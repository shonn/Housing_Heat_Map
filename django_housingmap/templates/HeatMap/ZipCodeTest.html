<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<style type="text/css">
		html { height: 100% }
		body {height: 100%; margin: 0; padding: 0 }
		#map-canvas { height: 90%; width:100%;}
		#debug{height: 10%; width:100%; overflow:auto}
	</style>
	<script type="text/javascript" 
		src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA_JEN1JLQ2C341o4pAuyd04GSYd-Q89Lg&libraries=drawing&sensor=false">
	</script>
	<script type="text/javascript"
		src="/home/GeoJSON.js">
	</script>
	<script type="text/javascript">
	function initialize() {		
		//Map Information
		  var myLatLng = new google.maps.LatLng(37.42291810, -122.08542120);
		  var mapOptions = {
		    zoom: 15,
		    center: myLatLng,
		    mapTypeId: google.maps.MapTypeId.TERRAIN
		  };

		  var map = new google.maps.Map(document.getElementById("map-canvas"),
		      mapOptions);
		
		var googleMapsVector = null;
		
		var shapeOptions = {
  				strokeColor: "#00FF00",
		    	strokeOpacity: 0.8,
		    	strokeWeight: 2,
		    	fillColor: "#FF0000",
		    	fillOpacity: 0.35
			};
		
		// asynchronous json request      
		var xhr = new XMLHttpRequest();
		xhr.open('GET', 'http://localhost:8080/home/getHousingGrowthinBoundingbox.json', true);
		xhr.onload = function() {
			var response = this.responseText;
			document.getElementById('debug').innerHTML = response;
			var result = JSON.parse(response);
			
			googleMapsVector = new GeoJSON(result, shapeOptions);
			document.getElementById('debug').innerHTML =googleMapsVector;
			for(var i = 0; i < googleMapsVector.length - 1; i++){
				googleMapsVector[i][0].setMap(map);
			}
		};
		xhr.send();
		  	
//		  google.maps.event.addListener(map, 'bounds_changed', function() {
//        	 document.getElementById("debug").innerHTML = map.getBounds();
//      		});
		}
		google.maps.event.addDomListener(window,'load',initialize);
	</script>
</head>
<body>
		<div id="debug">
		</div>
		<div id="map-canvas">this is the map</div>
</body>
</html>